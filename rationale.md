[원문 보기](https://fennel-lang.org/rationale)

# Why Fennel?

Fennel은 Lua 런타임에서 실행되는 프로그래밍 언어입니다.

## 왜 Lua를 사용합니까?
Lua 프로그래밍 언어는 훌륭하지만 과소평가된 도구입니다. 놀라울 정도로 강력하면서도 언어 자체의 개념과 구현 크기 측면에서 매우 작은 크기를 자랑합니다. (참조 구현은 약 1만 9천 줄의 C 코드로 구성되어 있으며 278kb로 컴파일됩니다.) Lua는 매우 간단하기 때문에 매우 빠릅니다. 하지만 Lua의 가장 중요한 점은 다른 프로그램에 내장되어 최종 사용자가 다시 프로그래밍할 수 있도록 특별히 설계되었다는 것입니다. (역주: Lua 프로그래밍 언어는 프로그램에 내장하는 스크립트 엔진으로 종종 사용됩니다.)

Lua의 개념적 단순성은 JavaScript나 Python 같은 다른 "배우기 쉬운" 언어들과 극명한 대조를 이룹니다. Lua는 작업을 완료하는 데 필요한 최소한의 아이디어만 포함하고 있으며, Forth와 Scheme만이 이에 필적하는 단순성을 제공합니다. 이러한 세심한 단순성과 프로그램 재프로그래밍 가능성에 대한 강조가 결합되면, 프로그램을 사용자가 통제할 수 없는 블랙박스처럼 취급하는 기술 트렌드에 대한 강력한 해결책이 될 것입니다.

## 하지만...
Lua가 그렇게 훌륭하다면 왜 Lua를 사용하지 않는 걸까요? 많은 경우 Lua를 사용하면 됩니다! 하지만 Lua에는 시간이 지남에 따라 오류를 유발하기 쉽거나 명확하지 않게 보이는 몇 가지 단점이 있습니다. Fennel은 Lua에서 실행되며 Fennel의 런타임 의미론은 Lua의 하위 집합입니다. Fennel은 Lua 프로그램을 작성하는 데 사용할 수 있는 대체 표기법으로써 일반적인 함정을 피할 수 있도록 도와줍니다. 이를 통해 Fennel은 한 가지 작업에만 집중하고 가상 머신, 표준 라이브러리, 프로파일러 및 디버거 구현과 같은 작업에 얽매이지 않을 수 있습니다. Lua에서 이미 작동하는 라이브러리나 도구는 Fennel에서도 마찬가지로 잘 작동합니다.

Lua와 Fennel의 가장 뚜렷한 차이점은 괄호를 사용하는 문법입니다. Fennel은 Lisp 계열의 프로그래밍 언어입니다. 이는 문법의 복잡성을 제거합니다. 괄호 기반 문법은 더 규칙적이며, 예외적인 경우가 적습니다. Fennel은 Lisp이기 때문에 Lua에서 다음과 같은것을 제거하였습니다:

 * 문장(statements) (모든것은 표현식(expression)입니다),
 * 연산자 우선순위 (무엇이 우선하는지에 대한 모호함이 없습니다), 그리고
 * 조기 반환 (함수의 결과는 항상 끝에서 반환됩니다).

## 변수
Lua에서 제기되는 가장 흔하고 정당한 비판 중 하나는 `local` 선언을 추가하는 것을 잊거나 오타를 내는 등의 실수로 전역 변수를 사용하기 쉽다는 것입니다. Fennel은 드물지만 필요한 경우에만 전역 변수를 사용할 수 있도록 허용하며, 실수로 전역 변수를 사용하기는 매우 어렵게 만듭니다.

Fennel은 일반 지역 변수를 재할당하는 기능도 제거합니다. 재할당될 변수를 선언하는 경우, `var`를 사용하여 선언해야 합니다. 이렇게 하면 코드가 더 깔끔해지고 재할당이 언제 발생할지 한눈에 알 수 있습니다. Lua 5.4에서는 `<const>` 변수를 통해 유사한 개념을 도입했지만, Fennel은 Lua처럼 수십 년 된 기존 코드를 유지할 필요가 없었기 때문에 더 깔끔한 선택을 기본값으로 지정할 수 있었습니다.

## 테이블과 반복문
Lua의 테이블(데이터 구조) 표기법은 다소 시대에 뒤떨어진 느낌이 듭니다. Lua는 순차 테이블(배열형)과 키/값 테이블(사전형) 모두에 중괄호를 사용합니다. Fennel은 순차 테이블에는 대괄호를, 키/값 테이블에는 중괄호를 사용하는 훨씬 더 익숙한 표기법을 사용합니다.

또한 Lua는 "X에서 Y까지 숫자 세기" 스타일 루프와 보다 일반적인 반복자(Iterator) 기반 루프 모두에 대해 `for` 키워드를 사용합니다. Fennel은 첫 번째 경우에는 `for`를, 두 번째 경우에는 `each`를 사용합니다.

## 함수
Lua에 대한 또 다른 일반적인 비판은 인자 수 검사가 부족하다는 것입니다. 즉, 충분한 인수 없이 함수를 호출해도 오류를 표시하는 대신 그냥 진행합니다. Fennel을 사용하면 속도 향상을 위해 필요할 때에는 이러한 방식(`fn`)의 함수를 작성할 수 있을 뿐만 아니라, `lambda`를 사용하여 필요한 인수를 확인하는 함수도 작성할 수 있습니다.

## 기타
최신 언어로 프로그래밍 경험이 있다면 변수 바인딩 시 데이터 구조를 분해하는것과, 더 선언적인 조건문을 작성하기 위해 패턴 매칭을 사용하는 것에 익숙해졌을 가능성이 높습니다. 이 두 가지 모두 Lua에는 없으며 Fennel에는 포함되어 있습니다.

마지막으로 Fennel에는 매크로 시스템이 포함되어 있어 새로운 구문 형식을 쉽게 확장할 수 있습니다. 이 기능을 마지막에 제시한 이유는 Lisp 프로그래머들이 역사적으로 이 기능의 강력함을 크게 강조해 왔지만, 이처럼 강력한 구조의 사용이 정당화되는 상황은 비교적 드물기 때문입니다.

디자인 관점에서 Fennel의 지침 원칙을 더 자세히 살펴보려면 《[Values of Fennel](https://fennel-lang.org/values)》을 참조하세요.
